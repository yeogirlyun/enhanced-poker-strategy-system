Hold'em Trainer - Architecture & ChangelogThis document provides a comprehensive overview of the Hold'em Trainer's architecture, its strategic foundations, and its complete version history.1. Architecture & Feature EvolutionThis section outlines the current software architecture after the major Object-Oriented refactoring and details the key features that have been developed over time.Core Modules (v11.0 and later)The application is now built on a modular, single-responsibility architecture:integrated_trainer.py: The main entry point and Game Orchestrator. It coordinates the high-level game flow and now includes an Enhanced Feedback System to provide example-based advice to the user.simulation_engine.py: A powerful headless simulation tool used for strategy validation. It pits multiple AI agents against each other over thousands of hands to provide quantitative performance data (bb/100) for different strategies.strategy_guide_generator.py: (Formerly json_to_markdown.py) A utility that reads a strategy file and generates a clean, human-readable Strategy Guide in both Markdown and landscape PDF formats.strategy_manager.py: An interactive Command-Line Interface (CLI) tool to create, view, and edit strategy.json files. It supports modifying individual hand strengths and decision table rules.table.py: Manages the physical table, including seats, player objects, and the rotating dealer button. It is the source of truth for who is in what position.player.py: Defines the Player abstract base class and its concrete implementations: UserPlayer (for human input) and BotPlayer (for AI).decision_engine.py: Contains the DecisionEngine class, which is the "brain" of the AI. It takes a game state and strategy file to determine the optimal action.enhanced_hand_evaluation.py: Provides advanced hand evaluation, including equity calculation, draw detection, and board texture analysis.session_logger.py: Handles database logging for session tracking, mistake analysis, and performance analytics.training_modes.py: Contains specialized training modes like Drills, Speed Training, etc.Data Filesstrategy.json (and variants): The core, data-driven strategy configuration file. The manager can now create multiple named versions (e.g., tight_strategy.json).holdem_sessions.db: The SQLite database for persistent session and mistake tracking.Key Features EvolutionStrategy Simulation & Validation: The simulation_engine.py allows for empirical A/B testing of any number of strategies to validate their performance.Interactive Strategy Editor: strategy_manager.py has been transformed into a CLI tool, allowing for precise, on-the-fly editing of any part of the strategy.Enhanced Feedback System: The trainer's feedback now provides concrete examples of hands that fit the current rule, explaining why a decision was right or wrong.Automated Guide Generation: The strategy_guide_generator.py creates professional, multi-format (MD and PDF) documentation for any given strategy file.Object-Oriented Design (v9.0): Logic is encapsulated in single-responsibility classes (Table, Player, DecisionEngine), improving maintainability.Modern Blind Defense (v7.0): The strategy incorporates GTO principles for blind vs. blind play, including position-aware, frequency-based defense.2. Modern Blind Defense StrategyThis section details the GTO-based blind defense strategy implemented in the trainer. The core principles remain, but the implementation has been refined by the new 5-tier system.Implementation in strategy.jsonThe strategy.json file contains a blind_defense section. The hand ranges are now aligned with the new, logical 5-tier system, making the rules easier to learn.Example Structure (strategy.json - v10.0 and later)"blind_defense": {
    "BB": {
        "vs_BTN": {
            "value_thresh": 20,
            "call_range": [5, 19]
        }
    },
    "SB": {
        "vs_UTG": {
            "value_thresh": 30,
            "call_range": [99, 98]
        }
    }
}
In this example, when facing a Button raise, the Big Blind 3-bets with Tier 3+ hands and calls with Tier 4 and Tier 5 hands. The Small Blind implements a "3-bet or fold" strategy against an Under-the-Gun raise (the impossible [99, 98] range effectively removes the call option).Key Improvements from this ModelPot Odds Integration: The BB gets excellent pot odds, justifying a very wide calling range, which is now reflected in the strategy.Position-Aware Defense: The strategy differentiates sharply between defending in the SB (always out of position) and the BB (often closes the action).Balanced 3-Bet/Call Ranges: The strategy uses a balanced approach of 3-betting for value with premium hands, calling with playable hands, and folding the bottom of the range.3. Detailed Version History (Changelog)Version 11.0 (2025-07-28) - Strategy Simulation EngineARCHITECTURE: Added the new simulation_engine.py module for headless, agent-vs-agent strategy evaluation.FEATURE: The engine accepts any number of strategy files as command-line arguments to run N-player simulations.FEATURE: The final simulation report is sorted by performance and ranks each strategy by its win rate (bb/100 hands), providing quantitative data.Version 10.2 (2025-07-28) - Interactive Strategy Manager CLIFEATURE: Transformed strategy_manager.py into a full-featured CLI tool.ADDED: set, remove, add, and edit commands to interactively modify the strategy file from the command line.ADDED: The create command now supports an optional filename to manage multiple strategies.ADDED: Logic to automatically enforce the .json extension on all strategy files for consistency.Version 10.1 (2025-07-28) - Automated Guide GenerationARCHITECTURE: Renamed json_to_markdown.py to strategy_guide_generator.py to better reflect its purpose.FEATURE: The generator now accepts a command-line argument to process any strategy file, not just the default.FEATURE: Output .md and .pdf files are now dynamically named based on the input strategy file.UPGRADE: Migrated PDF generation from pdfkit to the modern WeasyPrint library.FIXED: Corrected all PDF formatting issues by setting landscape orientation and using clean line breaks.Version 10.0 (2025-07-28) - 5-Tier Strategy ReconfigurationSTRATEGY: Reconfigured the entire preflop strategy around a new, logical 5-tier system (Elite, Premium, Gold, Silver, Bronze) for easier learning.STRATEGY: Aligned all decision thresholds (opening, 3-betting) with the new tier boundaries.STRATEGY: Tightened the baseline strategy by removing several troublesome/marginal hands (A9o, K9o, ATo, etc.).Version 9.2 (2025-07-27) - Enhanced Feedback SystemFEATURE: Upgraded the DetailedFeedbackSystem in integrated_trainer.py.IMPROVED: Feedback for incorrect moves now includes concrete examples of hands that should be played in that spot, explaining the 'why' behind the strategy.Version 9.1 (2025-07-26) - Refactoring FixFIXED: ImportError for AdvancedHandEvaluator by correcting imports to use EnhancedHandEvaluator.FIXED: Logic in GameOrchestrator to correctly instantiate and use evaluation classes.Version 9.0 (2025-07-26) - Full OOP RefactoringARCHITECTURE: Replaced the monolithic AdvancedGame class with a GameOrchestrator.ARCHITECTURE: Introduced table.py, player.py, and decision_engine.py to encapsulate responsibilities.Version 7.0 (2025-01-25) - Modern Blind Defense UpdateSTRATEGY: Implemented the modern, GTO-based blind defense model. This includes position-based defense ranges and wider calling frequencies.Version 6.2 (Original) - Fully Data-DrivenARCHITECTURE: The initial data-driven version. Separated strategy logic from the game engine by creating strategy.json.